<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LogiX æ–‡æ¡£ä¸­å¿ƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 20px;
        }

        .main-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            overflow: hidden;
            max-width: 1400px;
            width: 100%;
            display: flex;
            min-height: 90vh;
        }

        /* ä¾§è¾¹æ æ ·å¼ */
        .sidebar {
            width: 350px;
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 25px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .logo {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .subtitle {
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .nav-section {
            padding: 20px 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .nav-section-title {
            font-weight: 600;
            color: #495057;
            margin-bottom: 12px;
            padding-left: 10px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-item {
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-item:hover {
            background: #e9ecef;
        }

        .nav-item.active {
            background: #667eea;
            color: white;
        }

        .nav-item-icon {
            font-size: 1.2rem;
        }

        .nav-item-text {
            flex: 1;
            font-size: 0.9rem;
        }

        .nav-item-badge {
            background: #ffc107;
            color: #212529;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .content-header {
            background: white;
            padding: 20px 30px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: #f8f9fa;
            border-radius: 25px;
            padding: 10px 20px;
            flex: 1;
            max-width: 400px;
        }

        .search-box input {
            border: none;
            background: transparent;
            outline: none;
            flex: 1;
            font-size: 0.95rem;
            margin-left: 10px;
        }

        .search-icon {
            color: #6c757d;
        }

        .content-body {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .welcome-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .welcome-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .welcome-header h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .welcome-header p {
            color: #6c757d;
            font-size: 1.1rem;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .quick-action-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .quick-action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .quick-action-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .quick-action-title {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .feature-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .feature-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .service-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .service-item:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .service-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .service-url {
            color: #667eea;
            font-size: 0.85rem;
            word-break: break-all;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tech-badge {
            background: #e3f2fd;
            color: #1976d2;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* Markdown å†…å®¹æ ·å¼ */
        .markdown-content {
            max-width: 900px;
            margin: 0 auto;
            line-height: 1.8;
        }

        .markdown-content h1 {
            color: #2c3e50;
            font-size: 2rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        .markdown-content h2 {
            color: #2c3e50;
            font-size: 1.5rem;
            margin: 30px 0 15px 0;
            padding-left: 15px;
            border-left: 4px solid #667eea;
        }

        .markdown-content h3 {
            color: #495057;
            font-size: 1.2rem;
            margin: 25px 0 10px 0;
        }

        .markdown-content p {
            color: #495057;
            margin-bottom: 15px;
        }

        .markdown-content ul, .markdown-content ol {
            margin-bottom: 20px;
            padding-left: 25px;
        }

        .markdown-content li {
            color: #495057;
            margin-bottom: 8px;
        }

        .markdown-content code {
            background: #f8f9fa;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .markdown-content pre {
            background: #2c3e50;
            color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin-bottom: 20px;
        }

        .markdown-content pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }

        .markdown-content blockquote {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .markdown-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }

        .markdown-content th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }

        .markdown-content td {
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
        }

        .markdown-content tr:hover {
            background: #f8f9fa;
        }

        .markdown-content a {
            color: #667eea;
            text-decoration: none;
        }

        .markdown-content a:hover {
            text-decoration: underline;
        }

        /* è¿”å›æŒ‰é’® */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            color: #495057;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .back-button:hover {
            background: #e9ecef;
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }

        @media (max-width: 900px) {
            .main-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #e9ecef;
                max-height: 300px;
            }

            .content-body {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- ä¾§è¾¹æ  -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">ğŸš¢</div>
                <h1>LogiX æ–‡æ¡£ä¸­å¿ƒ</h1>
                <p class="subtitle">ä¸€ç«™å¼ç‰©æµç³»ç»Ÿå¼€å‘å­¦ä¹ å¹³å°</p>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">ğŸ  é¦–é¡µ</div>
                <div class="nav-item active" data-section="home">
                    <span class="nav-item-icon">ğŸ“‹</span>
                    <span class="nav-item-text">æ¬¢è¿é¡µ</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">ğŸš€ å¿«é€Ÿå¼€å§‹</div>
                <div class="nav-item" data-doc="DEV_ENVIRONMENT_GUIDE.md">
                    <span class="nav-item-icon">âš¡</span>
                    <span class="nav-item-text">å¼€å‘ç¯å¢ƒæŒ‡å—</span>
                    <span class="nav-item-badge">â­</span>
                </div>
                <div class="nav-item" data-doc="README_DOCKER.md">
                    <span class="nav-item-icon">ğŸ³</span>
                    <span class="nav-item-text">Docker éƒ¨ç½²æŒ‡å—</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">ğŸ“¦ å‰åç«¯å¼€å‘</div>
                <div class="nav-item" data-doc="frontend/README.md">
                    <span class="nav-item-icon">ğŸ¨</span>
                    <span class="nav-item-text">å‰ç«¯æ–‡æ¡£</span>
                </div>
                <div class="nav-item" data-doc="backend/README.md">
                    <span class="nav-item-icon">âš™ï¸</span>
                    <span class="nav-item-text">åç«¯æ–‡æ¡£</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†</div>
                <div class="nav-item" data-doc="TIMESCALEDB_GUIDE.md">
                    <span class="nav-item-icon">ğŸ“Š</span>
                    <span class="nav-item-text">TimescaleDB å®Œæ•´æŒ‡å—</span>
                    <span class="nav-item-badge">â­</span>
                </div>
                <div class="nav-item" data-doc="TIMESCALEDB_QUICK_REFERENCE.md">
                    <span class="nav-item-icon">âš¡</span>
                    <span class="nav-item-text">TimescaleDB å¿«é€Ÿå‚è€ƒ</span>
                    <span class="nav-item-badge">â­</span>
                </div>
                <div class="nav-item" data-doc="ADMIN_TOOLS_GUIDE.md">
                    <span class="nav-item-icon">ğŸ”§</span>
                    <span class="nav-item-text">æ•°æ®åº“ç®¡ç†å·¥å…·æŒ‡å—</span>
                    <span class="nav-item-badge">â­</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">ğŸ› ï¸ ç®¡ç†å·¥å…·</div>
                <div class="nav-item" data-doc="MIGRATION_GUIDE.md">
                    <span class="nav-item-icon">ğŸ”„</span>
                    <span class="nav-item-text">è¿ç§»æŒ‡å—</span>
                </div>
                <div class="nav-item" data-doc="WINDOWS_DOCKER_GUIDE.md">
                    <span class="nav-item-icon">ğŸªŸ</span>
                    <span class="nav-item-text">Windows Docker é…ç½®</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">ğŸ“š å­¦ä¹ èµ„æº</div>
                <div class="nav-item" data-section="tools">
                    <span class="nav-item-icon">ğŸ”§</span>
                    <span class="nav-item-text">é¡¹ç›®å¯¼èˆªé¢æ¿</span>
                </div>
                <div class="nav-item" data-section="roadmap">
                    <span class="nav-item-icon">ğŸ“–</span>
                    <span class="nav-item-text">å­¦ä¹ è·¯çº¿å›¾</span>
                </div>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="content-area">
            <div class="content-header">
                <div class="search-box">
                    <span class="search-icon">ğŸ”</span>
                    <input type="text" id="searchInput" placeholder="æœç´¢æ–‡æ¡£å†…å®¹...">
                </div>
            </div>
            <div class="content-body" id="contentBody">
                <!-- å†…å®¹å°†é€šè¿‡ JavaScript åŠ¨æ€åŠ è½½ -->
            </div>
        </div>
    </div>

    <!-- åŠ è½½æ–‡æ¡£å†…å®¹å¤‡é€‰æ–¹æ¡ˆ -->
    <script src="docs-content.js"></script>
    <script>
        const docs = {
            home: {
                render: () => renderHome()
            },
            tools: {
                url: 'project-dashboard.html',
                external: true
            },
            roadmap: {
                url: 'learning-roadmap.html',
                external: true
            }
        };

        // æ¸²æŸ“é¦–é¡µ
        function renderHome() {
            return `
                <div class="welcome-section">
                    <div class="welcome-header">
                        <h1>ğŸš¢ æ¬¢è¿ä½¿ç”¨ LogiX æ–‡æ¡£ä¸­å¿ƒ</h1>
                        <p>ä¸€ç«™å¼ç‰©æµç³»ç»Ÿå¼€å‘å­¦ä¹ å¹³å° - ä»å…¥é—¨åˆ°ç²¾é€š</p>
                    </div>

                    <div class="quick-actions">
                        <div class="quick-action-card" onclick="navigateTo('home')">
                            <div class="quick-action-icon">ğŸš€</div>
                            <div class="quick-action-title">å¯åŠ¨å¼€å‘ç¯å¢ƒ</div>
                        </div>
                        <div class="quick-action-card" onclick="loadDoc('TIMESCALEDB_GUIDE.md')">
                            <div class="quick-action-icon">ğŸ“Š</div>
                            <div class="quick-action-title">å­¦ä¹ æ•°æ®åº“</div>
                        </div>
                        <div class="quick-action-card" onclick="loadDoc('DEV_ENVIRONMENT_GUIDE.md')">
                            <div class="quick-action-icon">ğŸ”§</div>
                            <div class="quick-action-title">ç¯å¢ƒé…ç½®</div>
                        </div>
                        <div class="quick-action-card" onclick="navigateTo('roadmap')">
                            <div class="quick-action-icon">ğŸ“–</div>
                            <div class="quick-action-title">å­¦ä¹ è·¯çº¿</div>
                        </div>
                    </div>

                    <div class="feature-section">
                        <h2>ğŸ“¦ æœåŠ¡è®¿é—®åœ°å€</h2>
                        <div class="service-grid">
                            <div class="service-item">
                                <div class="service-name">ğŸ¨ å‰ç«¯åº”ç”¨</div>
                                <div class="service-url">http://localhost:5173</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">âš™ï¸ åç«¯ API</div>
                                <div class="service-url">http://localhost:3001</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">ğŸ—„ï¸ TimescaleDB</div>
                                <div class="service-url">localhost:5432</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">ğŸ“¦ Redis</div>
                                <div class="service-url">localhost:6379</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">ğŸ”§ Adminer</div>
                                <div class="service-url">http://localhost:8080</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">ğŸ“Š pgAdmin</div>
                                <div class="service-url">http://localhost:5050</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">ğŸ“ˆ Grafana</div>
                                <div class="service-url">http://localhost:3000</div>
                            </div>
                            <div class="service-item">
                                <div class="service-name">ğŸ¯ Prometheus</div>
                                <div class="service-url">http://localhost:9090</div>
                            </div>
                        </div>
                    </div>

                    <div class="feature-section">
                        <h2>ğŸ’» æŠ€æœ¯æ ˆ</h2>
                        <h3>å‰ç«¯</h3>
                        <div class="tech-stack">
                            <span class="tech-badge">Vue 3.4.0</span>
                            <span class="tech-badge">TypeScript 5.3.0</span>
                            <span class="tech-badge">Vite 5.0.10</span>
                            <span class="tech-badge">Element Plus 2.4.4</span>
                            <span class="tech-badge">Pinia 2.1.7</span>
                            <span class="tech-badge">Vue Router 4.2.5</span>
                            <span class="tech-badge">ECharts 5.4.3</span>
                        </div>

                        <h3 style="margin-top: 20px;">åç«¯</h3>
                        <div class="tech-stack">
                            <span class="tech-badge">Node.js 18+</span>
                            <span class="tech-badge">Express</span>
                            <span class="tech-badge">TypeScript</span>
                        </div>

                        <h3 style="margin-top: 20px;">æ•°æ®åº“</h3>
                        <div class="tech-stack">
                            <span class="tech-badge">PostgreSQL 15</span>
                            <span class="tech-badge">TimescaleDB 2.15.1</span>
                            <span class="tech-badge">Redis 7</span>
                        </div>
                    </div>

                    <div class="feature-section">
                        <h2>âš¡ å¿«é€Ÿå¯åŠ¨</h2>
                        <p><strong>å¯åŠ¨å¼€å‘ç¯å¢ƒ:</strong> åŒå‡» <code>start-logix-dev.bat</code></p>
                        <p><strong>åœæ­¢å¼€å‘ç¯å¢ƒ:</strong> åŒå‡» <code>stop-logix-dev.bat</code></p>
                        <p><strong>å¯åŠ¨æ•°æ®åº“:</strong> åŒå‡» <code>tsdb-start.bat</code></p>
                        <p><strong>åœæ­¢æ•°æ®åº“:</strong> åŒå‡» <code>tsdb-stop.bat</code></p>
                    </div>

                    <div class="feature-section">
                        <h2>ğŸ”‘ é»˜è®¤è´¦å·</h2>
                        <p><strong>pgAdmin:</strong> admin@logix.com / LogiX@2024</p>
                        <p><strong>Adminer:</strong> æ— éœ€ç™»å½•ï¼Œç›´æ¥è¿æ¥æ•°æ®åº“</p>
                        <p><strong>æ•°æ®åº“è´¦å·:</strong> æŸ¥çœ‹ <code>.env</code> æ–‡ä»¶ä¸­çš„é…ç½®</p>
                    </div>
                </div>
            `;
        }

        // åŠ è½½ Markdown æ–‡æ¡£
        async function loadDoc(docPath) {
            const contentBody = document.getElementById('contentBody');
            contentBody.innerHTML = '<div style="text-align: center; padding: 50px;"><div style="font-size: 2rem;">ğŸ“–</div><p>æ­£åœ¨åŠ è½½æ–‡æ¡£...</p></div>';

            try {
                console.log('æ­£åœ¨åŠ è½½æ–‡æ¡£:', docPath);

                // æ£€æŸ¥æ˜¯å¦åœ¨ file:// åè®®ä¸‹
                const isFileProtocol = window.location.protocol === 'file:';
                console.log('æ˜¯å¦ä½¿ç”¨ file:// åè®®:', isFileProtocol);

                if (isFileProtocol) {
                    // file:// åè®®ä¸‹ï¼Œç›´æ¥ä½¿ç”¨å†…è”å†…å®¹
                    console.log('æ£€æµ‹åˆ° file:// åè®®ï¼Œä½¿ç”¨å†…è”å†…å®¹');
                    const inlineContent = window.DocsContent && window.DocsContent[docPath];

                    if (inlineContent) {
                        console.log('æ‰¾åˆ°å†…è”å†…å®¹ï¼Œæ–‡æ¡£é•¿åº¦:', inlineContent.length);
                        const htmlContent = parseMarkdown(inlineContent);
                        renderContent(htmlContent);
                        return;
                    } else {
                        throw new Error(`file:// åè®®ä¸‹æ— æ³•åŠ è½½å¤–éƒ¨æ–‡ä»¶ï¼Œä¸”æœªæ‰¾åˆ° "${docPath}" çš„å†…è”å†…å®¹ã€‚è¯·é€šè¿‡ Vite å¼€å‘æœåŠ¡å™¨è®¿é—®ã€‚`);
                    }
                }

                // é file:// åè®®ï¼Œå°è¯•ä»æœåŠ¡å™¨åŠ è½½
                const response = await fetch(docPath, {
                    method: 'GET',
                    headers: {
                        'Accept': 'text/markdown, text/plain, */*'
                    },
                    cache: 'no-cache'
                });

                console.log('Fetch å“åº”:', response.status, response.statusText);

                if (response.ok) {
                    const markdownText = await response.text();
                    if (markdownText && markdownText.trim()) {
                        const htmlContent = parseMarkdown(markdownText);
                        renderContent(htmlContent);
                        return;
                    }
                }

                // å¦‚æœ fetch å¤±è´¥æˆ–å†…å®¹ä¸ºç©ºï¼Œå°è¯•ä½¿ç”¨å†…è”å†…å®¹
                console.log('Fetch å¤±è´¥æˆ–å†…å®¹ä¸ºç©ºï¼Œå°è¯•ä½¿ç”¨å†…è”å†…å®¹');
                const inlineContent = window.DocsContent && window.DocsContent[docPath];

                if (inlineContent) {
                    console.log('ä½¿ç”¨å†…è”å†…å®¹:', docPath);
                    const htmlContent = parseMarkdown(inlineContent);
                    renderContent(htmlContent);
                    return;
                }

                // å¦‚æœä¸¤è€…éƒ½å¤±è´¥ï¼ŒæŠ›å‡ºé”™è¯¯
                throw new Error(`æ— æ³•åŠ è½½æ–‡æ¡£ "${docPath}"ã€‚Fetch å“åº”: ${response.status} ${response.statusText}ï¼Œå†…è”å†…å®¹æœªæ‰¾åˆ°ã€‚`);

            } catch (error) {
                console.error('æ–‡æ¡£åŠ è½½é”™è¯¯:', error);
                contentBody.innerHTML = `
                    <div style="text-align: center; padding: 50px;">
                        <div style="font-size: 3rem;">âŒ</div>
                        <h2>æ–‡æ¡£åŠ è½½å¤±è´¥</h2>
                        <p><strong>é”™è¯¯ä¿¡æ¯:</strong> ${error.message}</p>
                        <p><strong>è¯·æ±‚è·¯å¾„:</strong> ${docPath}</p>

                        ${window.location.protocol === 'file:' ? `
                        <div style="margin: 20px 0; padding: 15px; background: #fff3cd; border-radius: 8px; text-align: left;">
                            <strong>âš ï¸ æ£€æµ‹åˆ° file:// åè®®</strong>
                            <p style="margin-top: 10px;">æµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥ä¸å…è®¸é€šè¿‡ file:// åè®®åŠ è½½æœ¬åœ°æ–‡ä»¶ã€‚</p>
                            <p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
                            <ul style="margin-top: 5px; padding-left: 20px;">
                                <li>å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨: \`npm run dev\` æˆ–åŒå‡» \`start-logix-dev.bat\`</li>
                                <li>è®¿é—®: <a href="http://localhost:5173/index.html" target="_blank">http://localhost:5173/index.html</a></li>
                                <li>æˆ–è€…ç›´æ¥è®¿é—®å‰ç«¯åº”ç”¨: <a href="http://localhost:5173" target="_blank">http://localhost:5173</a></li>
                            </ul>
                        </div>
                        ` : `
                        <div style="margin: 20px 0; padding: 15px; background: #fff3cd; border-radius: 8px; text-align: left;">
                            <strong>ğŸ’¡ æç¤º:</strong>
                            <ul style="margin-top: 10px; padding-left: 20px;">
                                <li>ç¡®ä¿æ–‡æ¡£æ–‡ä»¶å­˜åœ¨äºé¡¹ç›®æ ¹ç›®å½•</li>
                                <li>ç¡®ä¿ Vite å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ</li>
                                <li>ç‚¹å‡»å³ä¸‹è§’çš„ "ğŸ” æµ‹è¯•æ–‡æ¡£åŠ è½½" æŒ‰é’®è¿›è¡Œè¯¦ç»†è¯Šæ–­</li>
                            </ul>
                        </div>
                        `}

                        <div style="margin: 20px 0; padding: 15px; background: #e3f2fd; border-radius: 8px;">
                            <strong>ğŸ“Œ å½“å‰ç¯å¢ƒä¿¡æ¯:</strong>
                            <ul style="margin-top: 10px; padding-left: 20px; text-align: left;">
                                <li><strong>URL:</strong> ${window.location.href}</li>
                                <li><strong>åè®®:</strong> ${window.location.protocol}</li>
                                <li><strong>ç«¯å£:</strong> ${window.location.port || 'é»˜è®¤'}</li>
                            </ul>
                        </div>

                        ${window.DocsContent && window.DocsContent[docPath] ? `
                        <div style="margin: 20px 0; padding: 15px; background: #d4edda; border-radius: 8px;">
                            <strong>âœ… æ‰¾åˆ°å¤‡é€‰æ–¹æ¡ˆ:</strong>
                            <p>æˆ‘ä»¬æ‰¾åˆ°äº†æ­¤æ–‡æ¡£çš„å†…è”ç‰ˆæœ¬ï¼Œä½†åŠ è½½æ—¶å‡ºç°é”™è¯¯ã€‚è¿™å¯èƒ½æ˜¯è„šæœ¬åŠ è½½é—®é¢˜ã€‚</p>
                            <button onclick="useInlineContent('${docPath}')" class="test-btn" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                                ä½¿ç”¨å†…è”å†…å®¹
                            </button>
                        </div>
                        ` : ''}

                        <p style="margin-top: 20px;">å»ºè®®æ“ä½œ:</p>
                        <ul style="text-align: left; display: inline-block;">
                            ${window.location.protocol === 'file:' ? `
                                <li>å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨åè®¿é—®: http://localhost:5173/index.html</li>
                                <li>è¿”å›é¦–é¡µæŸ¥çœ‹å…¶ä»–æ–‡æ¡£</li>
                            ` : `
                                <li>æ£€æŸ¥æ–‡æ¡£æ–‡ä»¶æ˜¯å¦å­˜åœ¨äºé¡¹ç›®æ ¹ç›®å½•</li>
                                <li>ç¡®ä¿ Vite æ­£åœ¨è¿è¡Œ: http://localhost:5173</li>
                                <li>ç‚¹å‡» "ğŸ” æµ‹è¯•æ–‡æ¡£åŠ è½½" æŒ‰é’®æŸ¥çœ‹è¯¦ç»†é”™è¯¯</li>
                                <li>è¿”å›é¦–é¡µæŸ¥çœ‹å…¶ä»–æ–‡æ¡£</li>
                            `}
                        </ul>
                        <br><br>
                        <a href="#" class="back-button" onclick="navigateTo('home'); return false;">è¿”å›é¦–é¡µ</a>
                        ${window.location.protocol !== 'file:' ? '<a href="test-fetch.html" target="_blank" class="back-button" style="display: inline-block; margin-left: 10px;">æµ‹è¯•æ–‡æ¡£åŠ è½½</a>' : ''}
                    </div>
                `;
            }
        }

        // ä½¿ç”¨å†…è”å†…å®¹
        function useInlineContent(docPath) {
            console.log('æ‰‹åŠ¨ä½¿ç”¨å†…è”å†…å®¹:', docPath);
            const inlineContent = window.DocsContent && window.DocsContent[docPath];

            if (inlineContent) {
                const htmlContent = parseMarkdown(inlineContent);
                renderContent(htmlContent);
            } else {
                alert(`æœªæ‰¾åˆ° "${docPath}" çš„å†…è”å†…å®¹`);
            }
        }

        // æ¸²æŸ“å†…å®¹
        function renderContent(htmlContent) {
            const contentBody = document.getElementById('contentBody');
            contentBody.innerHTML = `
                <a href="#" class="back-button" onclick="navigateTo('home'); return false;">
                    â† è¿”å›é¦–é¡µ
                </a>
                <div class="markdown-content">
                    ${htmlContent}
                </div>
            `;
            // æ·»åŠ ç›®å½•å¯¼èˆª
            addTableOfContents();
        }

        // æ·»åŠ ç›®å½•å¯¼èˆª
        function addTableOfContents() {
            const headings = document.querySelectorAll('.markdown-content h2, .markdown-content h3');
            if (headings.length === 0) return;

            let tocHtml = '<div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;"><h3 style="margin-bottom: 15px; color: #2c3e50;">ğŸ“‘ ç›®å½•</h3><ul style="list-style: none; padding-left: 10px;">';
            headings.forEach((heading, index) => {
                const id = 'heading-' + index;
                heading.id = id;
                const level = heading.tagName;
                const indent = level === 'H3' ? 'padding-left: 25px;' : '';
                tocHtml += `<li style="margin-bottom: 8px; ${indent}"><a href="#${id}" style="color: #667eea; text-decoration: none;">${heading.textContent}</a></li>`;
            });
            tocHtml += '</ul></div>';

            const markdownContent = document.querySelector('.markdown-content');
            if (markdownContent) {
                markdownContent.insertAdjacentHTML('afterbegin', tocHtml);
            }
        }

        // ç®€å•çš„ Markdown è§£æå™¨
        function parseMarkdown(markdown) {
            let html = markdown;

            // ä¿å­˜ä»£ç å—ä¸è¢«è½¬ä¹‰
            const codeBlocks = [];
            html = html.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
                codeBlocks.push(`<pre><code class="language-${lang || 'text'}">${escapeHtml(code)}</code></pre>`);
                return `__CODEBLOCK_${codeBlocks.length - 1}__`;
            });

            // è½¬ä¹‰ HTML æ ‡ç­¾ï¼ˆé™¤äº†ä»£ç å—ï¼‰
            html = escapeHtml(html);

            // è¿˜åŸä»£ç å—
            html = html.replace(/__CODEBLOCK_(\d+)__/g, (match, index) => codeBlocks[index]);

            // å¤„ç†æ ‡é¢˜
            html = html.replace(/^######\s+(.+)$/gm, '<h6>$1</h6>');
            html = html.replace(/^#####\s+(.+)$/gm, '<h5>$1</h5>');
            html = html.replace(/^####\s+(.+)$/gm, '<h4>$1</h4>');
            html = html.replace(/^###\s+(.+)$/gm, '<h3>$1</h3>');
            html = html.replace(/^##\s+(.+)$/gm, '<h2>$1</h2>');
            html = html.replace(/^#\s+(.+)$/gm, '<h1>$1</h1>');

            // å¤„ç†å¼•ç”¨å—
            html = html.replace(/^&gt;\s+(.+)$/gm, '<blockquote>$1</blockquote>');

            // å¤„ç†è¡Œå†…ä»£ç 
            html = html.replace(/`([^`]+)`/g, '<code>$1</code>');

            // å¤„ç†ç²—ä½“
            html = html.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/__([^_]+)__/g, '<strong>$1</strong>');

            // å¤„ç†æ–œä½“
            html = html.replace(/\*([^*]+)\*/g, '<em>$1</em>');
            html = html.replace(/_([^_]+)_/g, '<em>$1</em>');

            // å¤„ç†é“¾æ¥
            html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');

            // å¤„ç†å›¾ç‰‡
            html = html.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '<img src="$2" alt="$1" style="max-width: 100%; border-radius: 8px; margin: 15px 0;">');

            // å¤„ç†è¡¨æ ¼
            const tablePattern = /\|(.+)\|\n\|[-| :]+\|\n((?:\|.+\|\n?)+)/g;
            let match;
            while ((match = tablePattern.exec(html)) !== null) {
                const fullTable = match[0];
                const lines = fullTable.trim().split('\n');
                const header = parseTableRow(lines[0]);
                const rows = lines.slice(2).map(line => parseTableRow(line));

                const tableHtml = `
                    <div style="overflow-x: auto; margin: 20px 0;">
                        <table>
                            <thead>${header}</thead>
                            <tbody>${rows.join('')}</tbody>
                        </table>
                    </div>
                `;
                html = html.replace(fullTable, tableHtml);
            }

            // å¤„ç†æ— åºåˆ—è¡¨
            html = html.replace(/^[\-\*]\s+(.+)$/gm, '<li>$1</li>');
            html = html.replace(/(<li>[^<]*<\/li>\n?)+/g, '<ul>$&</ul>');

            // å¤„ç†æœ‰åºåˆ—è¡¨
            html = html.replace(/^\d+\.\s+(.+)$/gm, '<li>$1</li>');

            // å¤„ç†æ°´å¹³çº¿
            html = html.replace(/^---$/gm, '<hr style="margin: 20px 0; border: none; border-top: 2px solid #e9ecef;">');

            // å¤„ç†æ®µè½
            html = html.replace(/\n\n/g, '</p><p>');
            html = '<p>' + html + '</p>';

            // æ¸…ç†ç©ºæ®µè½
            html = html.replace(/<p>\s*<\/p>/g, '');

            return html;
        }

        // HTML è½¬ä¹‰å‡½æ•°
        function escapeHtml(text) {
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');
        }

        function parseTableRow(line) {
            const cells = line.split('|').slice(1, -1);
            const tag = line.includes('---') ? 'th' : 'td';
            return `<tr>${cells.map(cell => `<${tag}>${cell.trim()}</${tag}>`).join('')}</tr>`;
        }

        // å¯¼èˆªåˆ°æŒ‡å®šéƒ¨åˆ†
        function navigateTo(section) {
            const contentBody = document.getElementById('contentBody');
            const docConfig = docs[section];

            if (!docConfig) return;

            if (docConfig.external) {
                window.open(docConfig.url, '_blank');
            } else if (docConfig.render) {
                contentBody.innerHTML = docConfig.render();
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('é¡µé¢åŠ è½½å®Œæˆ');
            console.log('å½“å‰ URL:', window.location.href);
            console.log('æ–‡æ¡£åè®®:', window.location.protocol);
            console.log('æ–‡æ¡£ä¸»æœº:', window.location.hostname);
            console.log('æ–‡æ¡£ç«¯å£:', window.location.port);

            // æ£€æµ‹æ˜¯å¦åœ¨ Vite å¼€å‘æœåŠ¡å™¨ä¸‹è¿è¡Œ
            const isViteDev = window.location.port === '5173' ||
                              window.location.hostname === 'localhost' ||
                              window.location.hostname === '127.0.0.1';

            console.log('æ˜¯å¦åœ¨ Vite å¼€å‘æœåŠ¡å™¨:', isViteDev);

            // æ¸²æŸ“é¦–é¡µ
            document.getElementById('contentBody').innerHTML = renderHome();

            // ä¾§è¾¹æ å¯¼èˆªç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
                    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                    // æ·»åŠ å½“å‰æ´»åŠ¨çŠ¶æ€
                    this.classList.add('active');

                    const section = this.getAttribute('data-section');
                    const doc = this.getAttribute('data-doc');

                    if (section) {
                        navigateTo(section);
                    } else if (doc) {
                        loadDoc(doc);
                    }
                });
            });

            // æœç´¢åŠŸèƒ½
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function(e) {
                const query = e.target.value.toLowerCase();
                if (query.length < 2) return;

                // é«˜äº®æœç´¢ç»“æœ
                const navItems = document.querySelectorAll('.nav-item');
                navItems.forEach(item => {
                    const text = item.querySelector('.nav-item-text').textContent.toLowerCase();
                    if (text.includes(query)) {
                        item.style.background = '#fff3cd';
                    } else {
                        item.style.background = '';
                    }
                });
            });

            // æ·»åŠ è°ƒè¯•æŒ‰é’®
            addDebugButton();
        });

        // æ·»åŠ è°ƒè¯•æŒ‰é’®
        function addDebugButton() {
            const debugBtn = document.createElement('button');
            debugBtn.textContent = 'ğŸ” æµ‹è¯•æ–‡æ¡£åŠ è½½';
            debugBtn.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 1000;
                padding: 10px 20px;
                background: #667eea;
                color: white;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-size: 14px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            `;
            debugBtn.onclick = () => window.open('test-fetch.html', '_blank');
            document.body.appendChild(debugBtn);
        }
    </script>
</body>
</html>