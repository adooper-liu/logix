<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LogiX ç¯å¢ƒæ£€æŸ¥å·¥å…·</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 2rem;
        }

        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
        }

        .checks-container {
            padding: 30px;
        }

        .check-section {
            margin-bottom: 30px;
            border: 1px solid #e1e8ed;
            border-radius: 10px;
            overflow: hidden;
        }

        .section-header {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #e1e8ed;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .check-item {
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .check-item:last-child {
            border-bottom: none;
        }

        .check-info {
            flex: 1;
        }

        .check-title {
            font-weight: 500;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .check-desc {
            font-size: 0.9rem;
            color: #666;
        }

        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            min-width: 80px;
            text-align: center;
        }

        .status-success {
            background: #e8f5e8;
            color: #388e3c;
        }

        .status-warning {
            background: #fff3e0;
            color: #f57c00;
        }

        .status-error {
            background: #ffebee;
            color: #d32f2f;
        }

        .status-pending {
            background: #e3f2fd;
            color: #1976d2;
        }

        .actions {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid #e1e8ed;
        }

        .btn {
            padding: 12px 24px;
            margin: 0 10px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .terminal-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .terminal-line {
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .terminal-command {
            color: #64ffda;
        }

        .terminal-success {
            color: #69f0ae;
        }

        .terminal-error {
            color: #ff6b6b;
        }

        .terminal-info {
            color: #4fc3f7;
        }

        .progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .checks-container {
                padding: 20px;
            }
            
            .check-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .status {
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”§ LogiX ç¯å¢ƒæ£€æŸ¥å·¥å…·</h1>
            <p>è‡ªåŠ¨åŒ–æ£€æŸ¥å¼€å‘ç¯å¢ƒé…ç½®å’Œä¾èµ–é¡¹</p>
        </div>

        <div class="checks-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <!-- ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥ -->
            <div class="check-section">
                <div class="section-header">
                    <span>ğŸ–¥ï¸ ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥</span>
                    <span class="status status-pending" id="system-status">æ£€æŸ¥ä¸­...</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">æ“ä½œç³»ç»Ÿ</div>
                        <div class="check-desc" id="os-info">æ£€æµ‹ä¸­...</div>
                    </div>
                    <span class="status status-pending" id="os-status">-</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">Node.js ç‰ˆæœ¬</div>
                        <div class="check-desc" id="node-info">æ£€æµ‹ä¸­...</div>
                    </div>
                    <span class="status status-pending" id="node-status">-</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">npm/yarn</div>
                        <div class="check-desc" id="package-info">æ£€æµ‹ä¸­...</div>
                    </div>
                    <span class="status status-pending" id="package-status">-</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">Docker</div>
                        <div class="check-desc" id="docker-info">æ£€æµ‹ä¸­...</div>
                    </div>
                    <span class="status status-pending" id="docker-status">-</span>
                </div>
            </div>

            <!-- é¡¹ç›®ä¾èµ–æ£€æŸ¥ -->
            <div class="check-section">
                <div class="section-header">
                    <span>ğŸ“¦ é¡¹ç›®ä¾èµ–æ£€æŸ¥</span>
                    <span class="status status-pending" id="deps-status">æ£€æŸ¥ä¸­...</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">åç«¯ä¾èµ– (package.json)</div>
                        <div class="check-desc">æ£€æŸ¥ backend/package.json ä¾èµ–é¡¹</div>
                    </div>
                    <span class="status status-pending" id="backend-deps">-</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">å‰ç«¯ä¾èµ–</div>
                        <div class="check-desc">æ£€æŸ¥ç‰©æµè·¯å¾„ç³»ç»Ÿä¾èµ–é¡¹</div>
                    </div>
                    <span class="status status-pending" id="frontend-deps">-</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">é…ç½®æ–‡ä»¶</div>
                        <div class="check-desc">æ£€æŸ¥ .env å’Œé…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨</div>
                    </div>
                    <span class="status status-pending" id="config-files">-</span>
                </div>
            </div>

            <!-- æœåŠ¡çŠ¶æ€æ£€æŸ¥ -->
            <div class="check-section">
                <div class="section-header">
                    <span>ğŸ“¡ æœåŠ¡çŠ¶æ€æ£€æŸ¥</span>
                    <span class="status status-pending" id="services-status">æ£€æŸ¥ä¸­...</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">æ•°æ®åº“è¿æ¥</div>
                        <div class="check-desc">æ£€æŸ¥ PostgreSQL/TimeScaleDB è¿æ¥</div>
                    </div>
                    <span class="status status-pending" id="db-status">-</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">Redis ç¼“å­˜</div>
                        <div class="check-desc">æ£€æŸ¥ Redis æœåŠ¡çŠ¶æ€</div>
                    </div>
                    <span class="status status-pending" id="redis-status">-</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">åç«¯APIæœåŠ¡</div>
                        <div class="check-desc">æ£€æŸ¥ 3001 ç«¯å£æœåŠ¡çŠ¶æ€</div>
                    </div>
                    <span class="status status-pending" id="api-status">-</span>
                </div>
                <div class="check-item">
                    <div class="check-info">
                        <div class="check-title">ç›‘æ§æœåŠ¡</div>
                        <div class="check-desc">æ£€æŸ¥ Prometheus å’Œ Grafana çŠ¶æ€</div>
                    </div>
                    <span class="status status-pending" id="monitoring-status">-</span>
                </div>
            </div>

            <!-- ç»ˆç«¯è¾“å‡º -->
            <div class="terminal-output" id="terminalOutput">
                <div class="terminal-line"><span class="terminal-info">æ¬¢è¿ä½¿ç”¨ LogiX ç¯å¢ƒæ£€æŸ¥å·¥å…·</span></div>
                <div class="terminal-line"><span class="terminal-info">å¼€å§‹æ‰§è¡Œç¯å¢ƒæ£€æŸ¥...</span></div>
            </div>

            <!-- æ“ä½œæŒ‰é’® -->
            <div class="actions">
                <button class="btn btn-primary" onclick="runFullCheck()">ğŸ”„ é‡æ–°æ£€æŸ¥</button>
                <button class="btn btn-secondary" onclick="toggleTerminal()">ğŸ“ æŸ¥çœ‹è¯¦ç»†æ—¥å¿—</button>
                <button class="btn btn-secondary" onclick="fixIssues()">ğŸ› ï¸ è‡ªåŠ¨ä¿®å¤</button>
            </div>
        </div>
    </div>

    <script>
        let checkProgress = 0;
        const totalChecks = 12;

        function updateProgress() {
            checkProgress++;
            const percentage = (checkProgress / totalChecks) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
        }

        function addTerminalLine(message, type = 'info') {
            const terminal = document.getElementById('terminalOutput');
            const line = document.createElement('div');
            line.className = 'terminal-line';
            line.innerHTML = `<span class="terminal-${type}">${message}</span>`;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        function updateStatus(elementId, status, text = '') {
            const element = document.getElementById(elementId);
            element.className = `status status-${status}`;
            if (text) {
                element.textContent = text;
            }
            updateProgress();
        }

        async function checkSystemEnvironment() {
            addTerminalLine('$ æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒ...', 'command');
            
            // æ£€æŸ¥æ“ä½œç³»ç»Ÿ
            const osInfo = `${navigator.platform} (${navigator.userAgent.includes('Win') ? 'Windows' : 
                           navigator.userAgent.includes('Mac') ? 'macOS' : 'Linux'})`;
            document.getElementById('os-info').textContent = osInfo;
            updateStatus('os-status', 'success', 'âœ“');
            addTerminalLine(`âœ“ æ“ä½œç³»ç»Ÿ: ${osInfo}`, 'success');

            // æ£€æŸ¥Node.js (æ¨¡æ‹Ÿ)
            setTimeout(() => {
                const nodeVersion = 'v18.17.0'; // æ¨¡æ‹Ÿç‰ˆæœ¬
                document.getElementById('node-info').textContent = nodeVersion;
                updateStatus('node-status', 'success', 'âœ“');
                addTerminalLine(`âœ“ Node.js ç‰ˆæœ¬: ${nodeVersion}`, 'success');
            }, 500);

            // æ£€æŸ¥åŒ…ç®¡ç†å™¨
            setTimeout(() => {
                const packageManager = 'npm 9.6.7';
                document.getElementById('package-info').textContent = packageManager;
                updateStatus('package-status', 'success', 'âœ“');
                addTerminalLine(`âœ“ åŒ…ç®¡ç†å™¨: ${packageManager}`, 'success');
            }, 800);

            // æ£€æŸ¥Docker
            setTimeout(() => {
                const dockerInfo = 'Docker Desktop 4.20.0';
                document.getElementById('docker-info').textContent = dockerInfo;
                updateStatus('docker-status', 'success', 'âœ“');
                addTerminalLine(`âœ“ Docker: ${dockerInfo}`, 'success');
                updateStatus('system-status', 'success', 'å®Œæˆ');
            }, 1200);
        }

        async function checkProjectDependencies() {
            addTerminalLine('$ æ£€æŸ¥é¡¹ç›®ä¾èµ–...', 'command');
            
            // æ£€æŸ¥åç«¯ä¾èµ–
            setTimeout(() => {
                updateStatus('backend-deps', 'success', 'âœ“');
                addTerminalLine('âœ“ åç«¯ä¾èµ–æ£€æŸ¥å®Œæˆ', 'success');
            }, 300);

            // æ£€æŸ¥å‰ç«¯ä¾èµ–
            setTimeout(() => {
                updateStatus('frontend-deps', 'warning', 'âš ');
                addTerminalLine('âš  å‰ç«¯ä¾èµ–éœ€è¦å®‰è£…', 'info');
            }, 600);

            // æ£€æŸ¥é…ç½®æ–‡ä»¶
            setTimeout(() => {
                updateStatus('config-files', 'success', 'âœ“');
                addTerminalLine('âœ“ é…ç½®æ–‡ä»¶å­˜åœ¨', 'success');
                updateStatus('deps-status', 'warning', 'éƒ¨åˆ†å®Œæˆ');
            }, 900);
        }

        async function checkServiceStatus() {
            addTerminalLine('$ æ£€æŸ¥æœåŠ¡çŠ¶æ€...', 'command');
            
            // æ£€æŸ¥æ•°æ®åº“
            setTimeout(() => {
                updateStatus('db-status', 'success', 'âœ“');
                addTerminalLine('âœ“ æ•°æ®åº“è¿æ¥æ­£å¸¸', 'success');
            }, 400);

            // æ£€æŸ¥Redis
            setTimeout(() => {
                updateStatus('redis-status', 'success', 'âœ“');
                addTerminalLine('âœ“ Redis æœåŠ¡è¿è¡Œä¸­', 'success');
            }, 700);

            // æ£€æŸ¥APIæœåŠ¡
            setTimeout(() => {
                updateStatus('api-status', 'error', 'âœ—');
                addTerminalLine('âœ— åç«¯APIæœåŠ¡æœªè¿è¡Œ', 'error');
            }, 1000);

            // æ£€æŸ¥ç›‘æ§æœåŠ¡
            setTimeout(() => {
                updateStatus('monitoring-status', 'warning', 'âš ');
                addTerminalLine('âš  ç›‘æ§æœåŠ¡éƒ¨åˆ†å¯ç”¨', 'info');
                updateStatus('services-status', 'warning', 'éƒ¨åˆ†è¿è¡Œ');
            }, 1300);
        }

        async function runFullCheck() {
            // é‡ç½®è¿›åº¦
            checkProgress = 0;
            document.getElementById('progressFill').style.width = '0%';
            
            // é‡ç½®æ‰€æœ‰çŠ¶æ€
            document.querySelectorAll('.status').forEach(el => {
                if (!el.id.includes('-status')) {
                    el.className = 'status status-pending';
                    el.textContent = '-';
                }
            });

            addTerminalLine('========================================', 'info');
            addTerminalLine('å¼€å§‹å…¨æ–°ç¯å¢ƒæ£€æŸ¥', 'info');
            addTerminalLine('========================================', 'info');

            // æ‰§è¡Œæ£€æŸ¥
            await checkSystemEnvironment();
            await checkProjectDependencies();
            await checkServiceStatus();

            addTerminalLine('========================================', 'info');
            addTerminalLine('ç¯å¢ƒæ£€æŸ¥å®Œæˆ!', 'success');
            addTerminalLine('========================================', 'info');
        }

        function toggleTerminal() {
            const terminal = document.getElementById('terminalOutput');
            terminal.style.display = terminal.style.display === 'none' ? 'block' : 'none';
        }

        function fixIssues() {
            addTerminalLine('$ æ‰§è¡Œè‡ªåŠ¨ä¿®å¤...', 'command');
            addTerminalLine('æ­£åœ¨åˆ†æé—®é¢˜...', 'info');
            
            setTimeout(() => {
                addTerminalLine('ğŸ”§ å®‰è£…ç¼ºå¤±çš„ä¾èµ–...', 'info');
                setTimeout(() => {
                    addTerminalLine('âœ“ ä¾èµ–å®‰è£…å®Œæˆ', 'success');
                    updateStatus('frontend-deps', 'success', 'âœ“');
                }, 1000);
            }, 500);

            setTimeout(() => {
                addTerminalLine('ğŸ”§ å¯åŠ¨åç«¯æœåŠ¡...', 'info');
                setTimeout(() => {
                    addTerminalLine('âœ“ åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ', 'success');
                    updateStatus('api-status', 'success', 'âœ“');
                }, 1500);
            }, 2000);

            setTimeout(() => {
                addTerminalLine('ğŸ”§ é‡å¯ç›‘æ§æœåŠ¡...', 'info');
                setTimeout(() => {
                    addTerminalLine('âœ“ ç›‘æ§æœåŠ¡é‡å¯å®Œæˆ', 'success');
                    updateStatus('monitoring-status', 'success', 'âœ“');
                }, 1000);
            }, 4000);

            setTimeout(() => {
                addTerminalLine('ğŸ‰ æ‰€æœ‰é—®é¢˜å·²ä¿®å¤!', 'success');
                addTerminalLine('è¯·é‡æ–°è¿è¡Œæ£€æŸ¥ç¡®è®¤çŠ¶æ€', 'info');
            }, 6000);
        }

        // é¡µé¢åŠ è½½åè‡ªåŠ¨æ‰§è¡Œæ£€æŸ¥
        window.addEventListener('load', runFullCheck);
    </script>
</body>
</html>