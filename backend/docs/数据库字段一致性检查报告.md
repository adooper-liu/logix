# æ•°æ®åº“å­—æ®µä¸€è‡´æ€§æ£€æŸ¥æŠ¥å‘Š

> ç”Ÿæˆæ—¶é—´: 2026-02-24
> æ£€æŸ¥èŒƒå›´: æ•°æ®åº“å®é™…è¡¨ç»“æ„ vs SQL è„šæœ¬å®šä¹‰

---

## ğŸ“Š æ¦‚è¦

| æ£€æŸ¥é¡¹ | çŠ¶æ€ | è¯¦æƒ… |
|--------|------|------|
| æ€»è¡¨æ•° | âœ… 29å¼  | å…¨éƒ¨å­˜åœ¨ |
| å­—å…¸è¡¨ | âœ… 7å¼  | å…¨éƒ¨å­˜åœ¨ |
| ä¸šåŠ¡è¡¨ | âœ… 3å¼  | å…¨éƒ¨å­˜åœ¨ |
| æµç¨‹è¡¨ | âœ… 5å¼  | å…¨éƒ¨å­˜åœ¨ |
| æ‰©å±•è¡¨ | âœ… 2å¼  | å…¨éƒ¨å­˜åœ¨ |
| é£é©¼æ‰©å±•è¡¨ | âœ… 4å¼  | å…¨éƒ¨å­˜åœ¨ |
| ç³»ç»Ÿè¡¨ | âœ… 6å¼  | å…¨éƒ¨å­˜åœ¨ |
| å¤–é”®çº¦æŸ | âœ… å®Œæ•´ | æ‰€æœ‰å¤–é”®æ­£å¸¸ |
| ç´¢å¼• | âœ… å®Œæ•´ | ä¸»é”®å’Œç´¢å¼•æ­£å¸¸ |

---

## 1. å­—å…¸è¡¨ (Dictionary Tables)

### âœ… dict_countries (å›½åˆ«å­—å…¸)

| å­—æ®µ | æ•°æ®åº“ | SQLè„šæœ¬ | çŠ¶æ€ |
|------|--------|---------|------|
| code | VARCHAR(10) | VARCHAR(50) | âš ï¸ é•¿åº¦ä¸ä¸€è‡´(10 vs 50) |
| nameCn | VARCHAR(100) | - | âš ï¸ é©¼å³°å‘½å |
| nameEn | VARCHAR(100) | - | âš ï¸ é©¼å³°å‘½å |
| region | VARCHAR(20) | - | âœ… |
| continent | VARCHAR(50) | - | âœ… |
| currency | VARCHAR(10) | - | âœ… |
| phoneCode | VARCHAR(5) | - | âœ… |
| sortOrder | INT | - | âœ… |
| isActive | BOOLEAN | - | âœ… |
| remarks | TEXT | - | âœ… |
| created_at | TIMESTAMP | TIMESTAMP | âœ… |
| updated_at | TIMESTAMP | TIMESTAMP | âœ… |

**æ³¨æ„**: æ­¤è¡¨ä¸åœ¨ SQL è„šæœ¬ä¸­ï¼Œæ˜¯æ–°å¢çš„å­—å…¸è¡¨

---

### âœ… dict_customer_types (å®¢æˆ·ç±»å‹å­—å…¸)

| å­—æ®µ | æ•°æ®åº“ | SQLè„šæœ¬ | çŠ¶æ€ |
|------|--------|---------|------|
| typeCode | VARCHAR(20) | - | âš ï¸ é©¼å³°å‘½å |
| typeName | VARCHAR(50) | - | âš ï¸ é©¼å³°å‘½å |
| category | VARCHAR(20) | - | âœ… |
| description | TEXT | - | âœ… |
| sortOrder | INT | - | âœ… |
| isActive | BOOLEAN | - | âœ… |
| remarks | TEXT | - | âœ… |
| created_at | TIMESTAMP | TIMESTAMP | âœ… |
| updated_at | TIMESTAMP | TIMESTAMP | âœ… |

**æ³¨æ„**: æ­¤è¡¨ä¸åœ¨ SQL è„šæœ¬ä¸­ï¼Œæ˜¯æ–°å¢çš„å­—å…¸è¡¨

---

### âœ… biz_customers (å®¢æˆ·è¡¨)

| å­—æ®µ | æ•°æ®åº“ | SQLè„šæœ¬ | çŠ¶æ€ |
|------|--------|---------|------|
| customerCode | VARCHAR(50) | - | âš ï¸ é©¼å³°å‘½å |
| customerName | VARCHAR(200) | - | âœ… |
| customerTypeCode | VARCHAR(20) | - | âš ï¸ é©¼å³°å‘½å |
| country | VARCHAR(10) | - | âœ… |
| contactPhone | VARCHAR(20) | - | âœ… |
| contactEmail | VARCHAR(100) | - | âœ… |
| paymentTerm | VARCHAR(20) | - | âœ… |
| priceTerm | VARCHAR(20) | - | âœ… |
| address | TEXT | - | âœ… |
| isActive | BOOLEAN | - | âœ… |
| sortOrder | INT | - | âœ… |
| remarks | TEXT | - | âœ… |
| created_at | TIMESTAMP | TIMESTAMP | âœ… |
| updated_at | TIMESTAMP | TIMESTAMP | âœ… |
| contactPerson | VARCHAR(50) | - | âœ… |
| taxNumber | VARCHAR(50) | - | âœ… |
| customsCode | VARCHAR(50) | - | âœ… |
| customer_type_code | VARCHAR(50) | - | âš ï¸ å†—ä½™å­—æ®µ |

**æ³¨æ„**:
1. æ­¤è¡¨ä¸åœ¨ SQL è„šæœ¬ä¸­ï¼Œæ˜¯æ–°å¢çš„ä¸šåŠ¡è¡¨
2. `customer_type_code` ä¸ `customerTypeCode` å­—æ®µé‡å¤
3. ä½¿ç”¨é©¼å³°å‘½å (camelCase)

---

## 2. ä¸šåŠ¡è¡¨ (Business Tables)

### âœ… biz_replenishment_orders (å¤‡è´§å•è¡¨)

| å­—æ®µ | æ•°æ®åº“ | SQLè„šæœ¬ | çŠ¶æ€ |
|------|--------|---------|------|
| order_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| main_order_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| sell_to_country | VARCHAR(50) | VARCHAR(50) | âœ… |
| customer_name | VARCHAR(100) | VARCHAR(100) | âœ… |
| order_status | VARCHAR(20) | VARCHAR(20) | âœ… |
| procurement_trade_mode | VARCHAR(20) | VARCHAR(20) | âœ… |
| price_terms | VARCHAR(20) | VARCHAR(20) | âœ… |
| total_boxes | INT | INT | âœ… |
| total_cbm | NUMERIC(12,2) | DECIMAL(12,2) | âœ… (ç±»å‹åˆ«å) |
| total_gross_weight | NUMERIC(12,2) | DECIMAL(12,2) | âœ… |
| shipment_total_value | NUMERIC(15,2) | DECIMAL(15,2) | âœ… |
| fob_amount | NUMERIC(15,2) | DECIMAL(15,2) | âœ… |
| cif_amount | NUMERIC(15,2) | DECIMAL(15,2) | âœ… |
| negotiation_amount | NUMERIC(15,2) | DECIMAL(15,2) | âœ… |
| order_date | DATE | DATE | âœ… |
| expected_ship_date | DATE | DATE | âœ… |
| actual_ship_date | DATE | DATE | âœ… |
| created_by | VARCHAR(50) | VARCHAR(50) | âœ… |
| container_required | BOOLEAN | BOOLEAN | âœ… |
| special_cargo_volume | NUMERIC(8,2) | DECIMAL(8,2) | âœ… |
| wayfair_spo | VARCHAR(50) | VARCHAR(50) | âœ… |
| created_at | TIMESTAMP | TIMESTAMP | âœ… |
| updated_at | TIMESTAMP | TIMESTAMP | âœ… |

**å¤–é”®**:
- âœ… main_order_number â†’ biz_replenishment_orders(order_number)

---

### âœ… biz_containers (è´§æŸœè¡¨)

| å­—æ®µ | æ•°æ®åº“ | SQLè„šæœ¬ | çŠ¶æ€ |
|------|--------|---------|------|
| container_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| order_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| container_type_code | VARCHAR(10) | VARCHAR(10) | âœ… |
| cargo_description | TEXT | TEXT | âœ… |
| gross_weight | NUMERIC(10,2) | DECIMAL(10,2) | âœ… |
| net_weight | NUMERIC(10,2) | DECIMAL(10,2) | âœ… |
| cbm | NUMERIC(8,2) | DECIMAL(8,2) | âœ… |
| packages | INT | INT | âœ… |
| seal_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| inspection_required | BOOLEAN | BOOLEAN | âœ… |
| is_unboxing | BOOLEAN | BOOLEAN | âœ… |
| logistics_status | VARCHAR(20) | VARCHAR(20) | âœ… |
| requires_pallet | BOOLEAN | BOOLEAN | âœ… |
| container_size | INT | INT | âœ… |
| is_rolled | BOOLEAN | BOOLEAN | âœ… |
| operator | VARCHAR(50) | VARCHAR(50) | âœ… |
| container_holder | VARCHAR(50) | VARCHAR(50) | âœ… |
| tare_weight | NUMERIC(10,2) | DECIMAL(10,2) | âœ… |
| total_weight | NUMERIC(10,2) | DECIMAL(10,2) | âœ… |
| over_length | NUMERIC(6,2) | DECIMAL(6,2) | âœ… |
| over_height | NUMERIC(6,2) | DECIMAL(6,2) | âœ… |
| danger_class | VARCHAR(20) | VARCHAR(20) | âœ… |
| current_status_desc_cn | VARCHAR(100) | VARCHAR(100) | âœ… |
| current_status_desc_en | VARCHAR(100) | VARCHAR(100) | âœ… |
| remarks | TEXT | TEXT | âœ… |
| created_at | TIMESTAMP | TIMESTAMP | âœ… |
| updated_at | TIMESTAMP | TIMESTAMP | âœ… |

**å¤–é”®**:
- âœ… order_number â†’ biz_replenishment_orders(order_number)
- âœ… container_type_code â†’ dict_container_types(type_code)

**ç´¢å¼•**:
- âœ… idx_c_order (order_number)
- âœ… idx_c_status (logistics_status)

---

## 3. æµç¨‹è¡¨ (Process Tables)

### âœ… process_sea_freight (æµ·è¿ä¿¡æ¯è¡¨)

| å­—æ®µ | æ•°æ®åº“ | SQLè„šæœ¬ | çŠ¶æ€ |
|------|--------|---------|------|
| id | VARCHAR(50) | VARCHAR(50) | âœ… |
| container_number | VARCHAR(50) | VARCHAR(50) | âœ… UNIQUE |
| bill_of_lading_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| booking_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| shipping_company_id | VARCHAR(50) | VARCHAR(50) | âœ… |
| vessel_name | VARCHAR(100) | VARCHAR(100) | âœ… |
| voyage_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| port_of_loading | VARCHAR(50) | VARCHAR(50) | âœ… |
| port_of_discharge | VARCHAR(50) | VARCHAR(50) | âœ… |
| freight_forwarder_id | VARCHAR(50) | VARCHAR(50) | âœ… |
| eta | DATE | DATE | âœ… |
| etd | DATE | DATE | âœ… |
| ata | DATE | DATE | âœ… |
| atd | DATE | DATE | âœ… |
| customs_clearance_date | DATE | DATE | âœ… |
| mbl_scac | VARCHAR(20) | VARCHAR(20) | âœ… |
| mbl_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| hbl_scac | VARCHAR(20) | VARCHAR(20) | âœ… |
| hbl_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| ams_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| transit_port_code | VARCHAR(50) | VARCHAR(50) | âœ… |
| transport_mode | VARCHAR(20) | VARCHAR(20) | âœ… |
| mother_vessel_name | VARCHAR(100) | VARCHAR(100) | âœ… |
| mother_voyage_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| shipment_date | DATE | DATE | âœ… |
| mother_shipment_date | DATE | DATE | âœ… |
| document_release_date | DATE | DATE | âœ… |
| port_entry_date | DATE | DATE | âœ… |
| rail_yard_entry_date | DATE | DATE | âœ… |
| truck_yard_entry_date | DATE | DATE | âœ… |
| route_code | VARCHAR(20) | VARCHAR(20) | âœ… |
| imo_number | VARCHAR(20) | VARCHAR(20) | âœ… |
| mmsi_number | VARCHAR(20) | VARCHAR(20) | âœ… |
| flag | VARCHAR(50) | VARCHAR(50) | âœ… |
| eta_origin | DATE | DATE | âœ… |
| ata_origin | DATE | DATE | âœ… |
| port_open_date | DATE | DATE | âœ… |
| port_close_date | DATE | DATE | âœ… |
| remarks | TEXT | TEXT | âœ… |
| created_at | TIMESTAMP | TIMESTAMP | âœ… |
| updated_at | TIMESTAMP | TIMESTAMP | âœ… |

**å¤–é”®**:
- âœ… container_number â†’ biz_containers(container_number)

**ç´¢å¼•**:
- âœ… process_sea_freight_pkey (id)
- âœ… idx_sf_bl (bill_of_lading_number)
- âœ… idx_sf_booking (booking_number)
- âœ… UNIQUE: process_sea_freight_container_number_key (container_number)

---

### âœ… process_port_operations (æ¸¯å£æ“ä½œè¡¨)

| å­—æ®µ | æ•°æ®åº“ | SQLè„šæœ¬ | çŠ¶æ€ |
|------|--------|---------|------|
| id | VARCHAR(50) | VARCHAR(50) | âœ… |
| container_number | VARCHAR(50) | VARCHAR(50) | âœ… |
| port_type | VARCHAR(20) | VARCHAR(20) | âœ… |
| port_code | VARCHAR(50) | VARCHAR(50) | âœ… |
| port_name | VARCHAR(100) | VARCHAR(100) | âœ… |
| port_sequence | INT | INT | âœ… |
| eta_dest_port | DATE | DATE | âœ… |
| ata_dest_port | DATE | DATE | âœ… |
| etd_transit | DATE | DATE | âœ… |
| atd_transit | DATE | DATE | âœ… |
| gate_in_time | TIMESTAMP | TIMESTAMP | âœ… |
| gate_out_time | TIMESTAMP | TIMESTAMP | âœ… |
| discharged_time | TIMESTAMP | TIMESTAMP | âœ… |
| available_time | TIMESTAMP | TIMESTAMP | âœ… |
| customs_status | VARCHAR(20) | VARCHAR(20) | âœ… |
| isf_status | VARCHAR(20) | VARCHAR(20) | âœ… |
| last_free_date | DATE | DATE | âœ… |
| gate_in_terminal | VARCHAR(50) | VARCHAR(50) | âœ… |
| gate_out_terminal | VARCHAR(50) | VARCHAR(50) | âœ… |
| berth_position | VARCHAR(50) | VARCHAR(50) | âœ… |
| eta_correction | TIMESTAMP | TIMESTAMP | âœ… |
| dest_port_unload_date | DATE | DATE | âœ… |
| planned_customs_date | DATE | DATE | âœ… |
| actual_customs_date | DATE | DATE | âœ… |
| customs_broker_code | VARCHAR(50) | VARCHAR(50) | âœ… |
| document_status | VARCHAR(20) | VARCHAR(20) | âœ… |
| all_generated_date | DATE | DATE | âœ… |
| customs_remarks | TEXT | TEXT | âœ… |
| isf_declaration_date | DATE | DATE | âœ… |
| document_transfer_date | DATE | DATE | âœ… |
| status_code | VARCHAR(20) | VARCHAR(20) | âœ… |
| status_occurred_at | TIMESTAMP | TIMESTAMP | âœ… |
| has_occurred | BOOLEAN | BOOLEAN | âœ… |
| location_name_en | VARCHAR(100) | VARCHAR(100) | âœ… |
| location_name_cn | VARCHAR(100) | VARCHAR(100) | âœ… |
| location_type | VARCHAR(20) | VARCHAR(20) | âœ… |
| latitude | NUMERIC(10,6) | DECIMAL(10,6) | âœ… |
| longitude | NUMERIC(10,6) | DECIMAL(10,6) | âœ… |
| timezone | INT | INT | âœ… |
| data_source | VARCHAR(50) | VARCHAR(50) | âœ… |
| cargo_location | VARCHAR(200) | VARCHAR(200) | âœ… |
| remarks | TEXT | TEXT | âœ… |
| created_at | TIMESTAMP | TIMESTAMP | âœ… |
| updated_at | TIMESTAMP | TIMESTAMP | âœ… |

**å¤–é”®**:
- âœ… container_number â†’ biz_containers(container_number)

**ç´¢å¼•**:
- âœ… process_port_operations_pkey (id)
- âœ… idx_po_container (container_number)
- âœ… idx_po_port (port_code)

---

## 4. å‘ç°çš„é—®é¢˜

### ğŸ”´ ä¸¥é‡é—®é¢˜

æ— 

### ğŸŸ¡ è­¦å‘Šé—®é¢˜

| è¡¨å | é—®é¢˜ | å½±å“ | å»ºè®® |
|------|------|------|------|
| dict_countries | codeå­—æ®µé•¿åº¦ä¸ä¸€è‡´(10 vs 50) | å¯èƒ½æ— æ³•å­˜å‚¨é•¿å›½å®¶ä»£ç  | å»ºè®®ç»Ÿä¸€ä¸ºVARCHAR(50) |
| biz_customers | customer_type_code ä¸ customerTypeCode é‡å¤ | æ•°æ®å†—ä½™ï¼Œå¯èƒ½é€ æˆæ··æ·† | å»ºè®®ç§»é™¤å…¶ä¸­ä¸€ä¸ª |
| æ–°å¢è¡¨(3å¼ ) | ä½¿ç”¨é©¼å³°å‘½å | ä¸SQLè„šæœ¬å‘½åé£æ ¼ä¸ä¸€è‡´ | å»ºè®®ç»Ÿä¸€ä½¿ç”¨è›‡å½¢å‘½å |

---

## 5. å‘½åè§„èŒƒå¯¹æ¯”

| å‘½åé£æ ¼ | ä½¿ç”¨èŒƒå›´ | ç¤ºä¾‹ |
|---------|---------|------|
| è›‡å½¢å‘½å (snake_case) | SQLè„šæœ¬å®šä¹‰çš„æ‰€æœ‰è¡¨ | `order_number`, `customer_name`, `sell_to_country` |
| é©¼å³°å‘½å (camelCase) | æ–°å¢çš„3å¼ è¡¨ | `customerCode`, `customerName`, `customerTypeCode` |

---

## 6. æ•°æ®ç±»å‹å·®å¼‚

| SQLè„šæœ¬ç±»å‹ | PostgreSQLå®é™…ç±»å‹ | å¤‡æ³¨ |
|-------------|------------------|------|
| DECIMAL | NUMERIC | å®Œå…¨å…¼å®¹ï¼ŒPostgreSQLä¸­NUMERICæ˜¯DECIMALçš„åˆ«å |
| VARCHAR | VARCHAR | âœ… ä¸€è‡´ |
| INT | INTEGER | âœ… ä¸€è‡´ |
| BOOLEAN | BOOLEAN | âœ… ä¸€è‡´ |
| DATE | DATE | âœ… ä¸€è‡´ |
| TIMESTAMP | TIMESTAMP WITHOUT TIME ZONE | âœ… ä¸€è‡´ |
| TEXT | TEXT | âœ… ä¸€è‡´ |

---

## 7. å»ºè®®ä¿®å¤æ“ä½œ

### 7.1 ä¿®å¤ dict_countries.code å­—æ®µé•¿åº¦

```sql
ALTER TABLE dict_countries ALTER COLUMN "code" TYPE VARCHAR(50);
```

### 7.2 ç§»é™¤ biz_customers.customer_type_code å†—ä½™å­—æ®µ

```sql
ALTER TABLE biz_customers DROP COLUMN "customer_type_code";
```

---

## 8. æ€»ç»“

### âœ… ä¸€è‡´æ€§è‰¯å¥½çš„æ–¹é¢

1. **æ‰€æœ‰29å¼ è¡¨éƒ½å·²æ­£ç¡®åˆ›å»º**
2. **å¤–é”®çº¦æŸå®Œæ•´ä¸”æ­£ç¡®**
3. **ç´¢å¼•é…ç½®åˆç†**
4. **æ ¸å¿ƒä¸šåŠ¡è¡¨å­—æ®µ100%åŒ¹é…SQLè„šæœ¬**
5. **é£é©¼æ‰©å±•è¡¨å­—æ®µ100%åŒ¹é…SQLè„šæœ¬**

### âš ï¸ éœ€è¦æ”¹è¿›çš„æ–¹é¢

1. **å‘½åè§„èŒƒä¸ç»Ÿä¸€**: éƒ¨åˆ†è¡¨ä½¿ç”¨é©¼å³°å‘½åï¼Œéƒ¨åˆ†ä½¿ç”¨è›‡å½¢å‘½å
2. **å­—æ®µé•¿åº¦ä¸ä¸€è‡´**: dict_countries.code é•¿åº¦å·®å¼‚
3. **æ•°æ®å†—ä½™**: biz_customers å­˜åœ¨å†—ä½™å­—æ®µ

### ğŸ¯ æ¨èä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | ä»»åŠ¡ | æ“ä½œ |
|--------|------|------|
| P0 | æ— ä¸¥é‡é—®é¢˜ | - |
| P1 | ç»Ÿä¸€å‘½åè§„èŒƒ | ä¿®æ”¹TypeORMå®ä½“æˆ–SQLè„šæœ¬ |
| P2 | ä¿®å¤å­—æ®µé•¿åº¦ | dict_countries.code |
| P3 | æ¸…ç†å†—ä½™å­—æ®µ | ç§»é™¤customer_type_code |

---

**æ£€æŸ¥å®Œæˆæ—¶é—´**: 2026-02-24
**æ£€æŸ¥äºº**: LogiX Database Assistant
